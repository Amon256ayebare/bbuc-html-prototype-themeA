<!doctype html>
<html lang="en"><head><meta charset="utf-8"><title>Users</title><meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/style.css"></head>
<body>
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Manage Users</h4>
    <div><a class="btn btn-secondary" href="dashboard.html">Back</a></div>
  </div>
  <div class="card mb-3 p-3">
    <form id="addUserForm" class="row g-2">
      <div class="col-md-4"><input class="form-control" name="name" placeholder="Name" required></div>
      <div class="col-md-4"><input class="form-control" name="email" placeholder="Email"></div>
      <div class="col-md-2"><button class="btn btn-primary">Add User</button></div>
    </form>
  </div>
  <div class="card p-3">
    <div class="table-responsive"><table class="table" id="usersTable"><thead><tr><th>Name</th><th>Email</th><th>Status</th><th>Action</th></tr></thead><tbody></tbody></table></div>
  </div>
</div>
<script>
function getUsers(){ return JSON.parse(localStorage.getItem('bbuc_users')||'[]'); }
function saveUsers(a){ localStorage.setItem('bbuc_users', JSON.stringify(a)); }
function render(){ const tbody=document.querySelector('#usersTable tbody'); tbody.innerHTML=''; getUsers().forEach(u=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${u.name}</td><td>${u.email||''}</td><td>${u.status||'active'}</td><td>${u.status!=='blocked'?`<button class="btn btn-sm btn-danger block" data-id="${u.id}">Block</button>`:`<button class="btn btn-sm btn-success unblock" data-id="${u.id}">Unblock</button>`}</td>`; tbody.appendChild(tr); }); }
document.getElementById('addUserForm').addEventListener('submit',(e)=>{ e.preventDefault(); const f=e.target; let users=getUsers(); const id=users.length?Math.max(...users.map(x=>x.id))+1:1; users.unshift({id:id,name:f.name.value.trim(),email:f.email.value.trim(),status:'active'}); saveUsers(users); f.reset(); render(); });
document.addEventListener('click',(ev)=>{ if(ev.target.matches('.block')){ const id=+ev.target.dataset.id; let users=getUsers(); users=users.map(u=>u.id===id?{...u,status:'blocked'}:u); saveUsers(users); render(); } if(ev.target.matches('.unblock')){ const id=+ev.target.dataset.id; let users=getUsers(); users=users.map(u=>u.id===id?{...u,status:'active'}:u); saveUsers(users); render(); } });
if(!localStorage.getItem('bbuc_users')) localStorage.setItem('bbuc_users', JSON.stringify([]));
render();
</script></body></html>
